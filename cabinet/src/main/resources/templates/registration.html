<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="../static/img/apple-icon.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../static/img/favicon.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>Paper Dashboard PRO by Creative Tim</title>

    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />


    <!-- Bootstrap core CSS     -->
    <link href="../static/css/bootstrap.min.css" rel="stylesheet" />

    <!--  Paper Dashboard core CSS    -->
    <link href="../static/css/paper-dashboard.css" rel="stylesheet"/>


    <!--  CSS for Demo Purpose, don't include it in your project     -->
    <link href="../static/css/demo.css" rel="stylesheet" />


    <!--  Fonts and icons     -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Muli:400,300' rel='stylesheet' type='text/css'>
    <link href="../static/css/themify-icons.css" rel="stylesheet">
</head>

<body>
<nav class="navbar navbar-transparent navbar-absolute">
    <div class="container">

    </div>
</nav>

<div class="wrapper wrapper-full-page">
    <div class="full-page login-page" data-color="" data-image="../static/img/background/background-2.jpg">
        <!--   you can change the color of the filter page using: data-color="blue | azure | green | orange | red | purple" -->
        <div class="content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-8 col-md-offset-2">
                        <div class="card card-wizard" id="wizardCard">
                            <form id="wizardForm" method="" action="">
                                <div class="header text-center">
                                    <h4 class="title">Регистрация</h4>
                                    <p class="category">в 3 шага</p>
                                </div>
                                <div class="content">
                                    <ul class="nav">
                                        <li><a href="#tab1" data-toggle="tab">1</a></li>
                                        <li><a href="#tab2" data-toggle="tab">2</a></li>
                                        <li><a href="#tab3" data-toggle="tab">3</a></li>
                                    </ul>
                                    <div class="tab-content">
                                        <div class="tab-pane" id="tab1">
                                            <h4 class="text-center">Регистрация возможна только для клиентов студии </br> <small> Введите номер телефона, который оставляли в студии и ожидайте смс-код</small></h4>


                                            <div class="row">
                                                <div class="col-md-5 col-md-offset-4">
                                                    <div class="form-group">
                                                        <label class="control-label">
                                                            Телефон<star>*</star>
                                                        </label>
                                                        <input class="form-control"
                                                               type="text"
                                                               name="phone"
                                                               id="phone"
                                                               phone="true"
                                                               placeholder="9151234567"
                                                        />
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="tab-pane" id="tab2">

                                            <h4 class="text-center">Мы выслали смс-код на ваш номер. </br> <small> Пожалуйста, введите его ниже</small></h4>
                                            <!--  -->
                                            <div class="row">
                                                </br>
                                                </br>
                                                <div class="col-md-5 col-md-offset-4">
                                                    <div class="form-group">
                                                        <label class="control-label">Смс-код<star>*</star></label>
                                                        <input class="form-control"
                                                               type="text"
                                                               name="sms"
                                                               id="sms"
                                                               placeholder="1245"
                                                        />
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                        <div class="tab-pane" id="tab3">
                                            <h3 class="text-center text-space">Мы узнали вас! (,Сергей) <br>
                                                <small>                                                  Осталось только придумать пароль </small></h3>


                                            <div class="row">

                                                <div class="col-md-5 col-md-offset-4">
                                                    <div class="form-group">
                                                        <label class="control-label">Пароль<star>*</star></label>
                                                        <input class="form-control"
                                                               type="text"
                                                               name="sms"
                                                               placeholder=""
                                                        />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <button type="button" class="btn btn-default  btn-fill btn-wd btn-back pull-left "  style="    min-width: 100px">Назад</button>

                                    <button type="button" class="btn btn-info btn-fill btn-wd btn-phone-ver pull-right " onclick="">телефон</button>
                                    <button type="button" class="btn btn-info btn-fill btn-wd btn-sms-ver pull-right" style="    min-width: 100px" onclick="">смс</button>

                                    <button type="button" class="btn btn-info btn-fill btn-wd btn-finish pull-right"  style="    min-width: 100px" onclick="onFinishWizard()">Зарегистрироваться</button>
                                    <div class="clearfix"></div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer class="footer footer-transparent">
            <div class="container">
                <div class="copyright">
                    &copy; <script>document.write(new Date().getFullYear())</script>,  <i class="fa fa-heart heart"></i>  <a href="#">Click team</a>
                </div>
            </div>
        </footer>
    </div>
</div>
</body>

<!--   Core JS Files. Extra: PerfectScrollbar + TouchPunch libraries inside jquery-ui.min.js   -->
<script src="../static/js/jquery-1.10.2.js" type="text/javascript"></script>
<script src="../static/js/jquery-ui.min.js" type="text/javascript"></script>
<script src="../static/js/bootstrap.min.js" type="text/javascript"></script>

<!--  Forms Validations Plugin -->
<script src="../static/js/jquery.validate.min.js"></script>

<!--  Plugin for Date Time Picker and Full Calendar Plugin-->
<script src="../static/js/moment.min.js"></script>

<!--  Date Time Picker Plugin is included in this js file -->
<script src="../static/js/bootstrap-datetimepicker.js"></script>

<!--  Select Picker Plugin -->
<script src="../static/js/bootstrap-selectpicker.js"></script>

<!--  Checkbox, Radio, Switch and Tags Input Plugins -->
<script src="../static/js/bootstrap-checkbox-radio-switch-tags.js"></script>

<!-- Circle Percentage-chart -->
<script src="../static/js/jquery.easypiechart.min.js"></script>

<!--  Charts Plugin -->
<script src="../static/js/chartist.min.js"></script>

<!--  Notifications Plugin    -->
<script src="../static/js/bootstrap-notify.js"></script>

<!-- Sweet Alert 2 plugin -->
<script src="../static/js/sweetalert2.js"></script>

<!-- Vector Map plugin -->
<script src="../static/js/jquery-jvectormap.js"></script>

<!--  Google Maps Plugin    -->
<script src="https://maps.googleapis.com/maps/api/js"></script>

<!-- Wizard Plugin    -->
<script src="../static/js/jquery.bootstrap.wizard.min.js"></script>

<!--  Bootstrap Table Plugin    -->
<script src="../static/js/bootstrap-table.js"></script>

<!--  Plugin for DataTables.net  -->
<script src="../static/js/jquery.datatables.js"></script>

<!--  Full Calendar Plugin    -->
<script src="../static/js/fullcalendar.min.js"></script>

<!-- Paper Dashboard PRO Core javascript and methods for Demo purpose -->
<script src="../static/js/paper-dashboard.js"></script>

<!-- Paper Dashboard PRO DEMO methods, don't include it in your project! -->
<script src="../static/js/demo.js"></script>

<script type="text/javascript">
    $().ready(function(){

        demo.checkFullPageBackgroundImage();

        setTimeout(function(){
            // after 1000 ms we add the class animated to the login/register card
            $('.card').removeClass('card-hidden');
        }, 700)

        var $validator = $("#wizardForm").validate({
            rules: {
                email: {
                    required: true,
                    email: true,
                    minlength: 5
                },
                first_name: {
                    required: false,
                    minlength: 5
                },
                last_name: {
                    required: false,
                    minlength: 5
                },
                website: {
                    required: true,
                    minlength: 5,
                    url: true
                },
                framework: {
                    required: false,
                    minlength: 4
                },
                cities: {
                    required: true

                },
                phone:{
                    number: true,
                    minlength: 4
                }
            }
        });

        // you can also use the nav-pills-[blue | azure | green | orange | red] for a different color of wizard
        $('#wizardCard').bootstrapWizard({
            tabClass: 'nav  nav-pills',
            nextSelector: '.btn-next, .btn-sms-ver, .btn-phone-ver',
            previousSelector: '.btn-back',
            onNext: function(tab, navigation, index) {
                var $valid = $('#wizardForm').valid();

                if(!$valid) {
                    $validator.focusInvalid();
                    return false;
                }

                var $total = navigation.find('li').length;
                var $current = index;
                console.log($total);
                console.log($current);

                if(index >= $total) {
                    //   Autologin?() 
                } else if(index == 1 ){
                    return verifyPhone();
                } else {
                    return verifySms();
                }



            },
            onInit : function(tab, navigation, index){

                //check number of tabs and fill the entire row
                var $total = navigation.find('li').length;
                $width = 100/$total;

                $display_width = $(document).width();

                if($display_width < 600 && $total > 3){
                    $width = 50;
                }

                navigation.find('li').css('width',$width + '%');
            },
            onTabClick : function(tab, navigation, index){
                // Disable the posibility to click on tabs
                return false;
            },
            onTabShow: function(tab, navigation, index) {
                var $total = navigation.find('li').length;
                var $current = index+1;

                var wizard = navigation.closest('.card-wizard');

                // If it's the last tab then hide the last button and show the finish instead
                if($current >= $total) {
                    $(wizard).find('.btn-next').hide();

                    $(wizard).find('.btn-sms-ver').hide();
                    $(wizard).find('.btn-tel-ver').hide();
                    $(wizard).find('.btn-back').hide();
                    $(wizard).find('.btn-finish').show();
                } else if($current == 1){
                    $(wizard).find('.btn-back').hide();
                    $(wizard).find('.btn-sms-ver').hide();

                    $(wizard).find('.btn-phone-ver').show();
                } else {

                    $(wizard).find('.btn-sms-ver').show();
                    $(wizard).find('.btn-back').show();
                    // $(wizard).find('.btn-next').show();
                    $(wizard).find('.btn-phone-ver').hide();
                    $(wizard).find('.btn-finish').hide();
                }
            }
        });
    });

    function onFinishWizard(){
        //создание профиля и возврат успешного сообщения todo
        swal("Отлично!", "Теперь у вас есть учётная запись в личном кабинете", "success");
    }

    function verifySms(){
        //Валидация смс todo
        if ($("#sms").val() == 1234){
            swal(":(", "Мы отправляли Вам другую смс", "error");
            return false
        }
    }

    function verifyPhone(){
        //Добавить валидацию телефона (проверить, что он есть в базе, можно возвращать имя, чтобы приветствовать пользователя)
        if ($("#phone").val() == 1234){
            swal(":(", "У нас не зарегистрировано такого телефона, пожалуйста, проверьте корректность ввода", "error");
            return false
        }
    }
</script>

</html>
